{"ast":null,"code":"import _objectSpread from \"/Users/katie/Desktop/Brandon projects/weather_app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/katie/Desktop/Brandon projects/weather_app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/katie/Desktop/Brandon projects/weather_app/client/src/components/WeatherSearch.js\";\nimport React, { useState, useEffect } from \"react\";\nimport useDebounce from \"./useDebounce\";\nimport { Paper } from \"@material-ui/core\";\nimport { Button } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\nimport { addItem } from \"../actions/itemActions\";\n\nconst WeatherList = ({\n  addItem,\n  isAuthenticated,\n  user\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        weatherData = _useState2[0],\n        setWeatherData = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        initialQuery = _useState4[0],\n        setInitialQuery = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        searchTerm = _useState6[0],\n        setSearchTerm = _useState6[1]; //debounce the search term\n\n\n  const debouncedSearchTerm = useDebounce(searchTerm, 700);\n\n  const handleChange = e => {\n    setSearchTerm(e.target.value);\n  };\n\n  useEffect(() => {\n    if (debouncedSearchTerm) {\n      getQuery(debouncedSearchTerm);\n    } else {\n      setInitialQuery([]);\n    }\n  }, [debouncedSearchTerm]); // query many cities worldID, only 11 at a time\n\n  async function getQuery(search) {\n    await fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/search/?query=${search}`).then(res => res.json()).then(res => setInitialQuery(res.slice(0, 10))).catch(err => {\n      console.error(err);\n    });\n  } // use each worldID to fetch each city weather data\n\n\n  useEffect(() => {\n    setWeatherData([]);\n    const showMoreStuff = false;\n\n    async function getWeather() {\n      Promise.all(initialQuery.map(item => {\n        fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${item.woeid}/`).then(res => res.json()).then(res => setWeatherData(prevArray => [...prevArray, {\n          res,\n          showMoreStuff\n        }])).catch(err => {\n          console.error(err);\n        });\n        return null;\n      }));\n    }\n\n    getWeather();\n  }, [initialQuery]);\n  useEffect(() => {\n    console.log(searchTerm);\n    console.log(weatherData);\n  }, [weatherData, searchTerm]); // onClick to toggle boolean to show more\n\n  function handleShow(id) {\n    const newData = weatherData.map(item => {\n      if (item.res.woeid === id) {\n        return _objectSpread({}, item, {\n          showMoreStuff: !item.showMoreStuff\n        });\n      } else return item;\n    });\n    setWeatherData(newData);\n  } // funct to return correct day and month from data\n\n\n  function getMyDay(day) {\n    const date1 = new Date(day);\n    const dayOfWeekIndex = date1.getDay();\n    const dayNames = [\"Mon\", \"Tue\", \"Wed\", \"Thur\", \"Fri\", \"Sat\", \"Sund\"];\n    return dayNames[dayOfWeekIndex];\n  }\n\n  function getMyMonth(month) {\n    const month1 = new Date(month);\n    const dayOfMonthIndex = month1.getMonth();\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\", \"July\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"];\n    return monthNames[dayOfMonthIndex];\n  } // add item to dashboard\n\n\n  const onAddItemClick = (item, user) => {\n    const newItem = {\n      name: item.res.title,\n      weathers: item,\n      newID: user._id\n    };\n    addItem(newItem);\n  };\n\n  console.log(user);\n  console.log(weatherData);\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Weather\"), user && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"userID: \", user._id), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: searchTerm,\n    onChange: handleChange,\n    placeholder: \"input city search\",\n    className: \"input-weather\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  })), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \"Total found: \", weatherData.length, \" \"), initialQuery.length > 0 && weatherData.length !== initialQuery.length ? React.createElement(\"img\", {\n    src: \"https://media.giphy.com/media/l31p1SkNXGz3l1nwwu/giphy.gif\",\n    alt: \"loading\",\n    className: \"loading-gif\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }) : weatherData.map(item => React.createElement(\"div\", {\n    className: \"each-weather\",\n    key: item.res.woeid,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"each-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, isAuthenticated === true ? React.createElement(Button, {\n    className: \"weather-button\",\n    variant: \"outlined\",\n    color: \"secondary\",\n    onClick: () => onAddItemClick(item, user),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, \"Add to Saved\") : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"Please login to save cities!\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    className: \"each-weather-title\",\n    variant: \"h3\",\n    component: \"h3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, item.res.title), React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Timezone: \", item.res.timezone), React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Time: \", item.res.time.slice(11, 16)), React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"Temperature:\", \" \", item.res.consolidated_weather[0].the_temp && item.res.consolidated_weather[0].the_temp.toFixed(1), \" \", \"degrees celcius\"), React.createElement(\"img\", {\n    className: \"weather-image\",\n    src: `https://www.metaweather.com/static/img/weather/${item.res.consolidated_weather[0].weather_state_abbr}.svg`,\n    alt: \"weather state\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Weather Conditions:\", \" \", item.res.consolidated_weather[0].weather_state_name), React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"Predictability:\", \" \", item.res.consolidated_weather[0].predictability && item.res.consolidated_weather[0].predictability, \"%\")))));\n};\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  addItem\n})(WeatherList);","map":{"version":3,"sources":["/Users/katie/Desktop/Brandon projects/weather_app/client/src/components/WeatherSearch.js"],"names":["React","useState","useEffect","useDebounce","Paper","Button","connect","addItem","WeatherList","isAuthenticated","user","weatherData","setWeatherData","initialQuery","setInitialQuery","searchTerm","setSearchTerm","debouncedSearchTerm","handleChange","e","target","value","getQuery","search","fetch","then","res","json","slice","catch","err","console","error","showMoreStuff","getWeather","Promise","all","map","item","woeid","prevArray","log","handleShow","id","newData","getMyDay","day","date1","Date","dayOfWeekIndex","getDay","dayNames","getMyMonth","month","month1","dayOfMonthIndex","getMonth","monthNames","onAddItemClick","newItem","name","title","weathers","newID","_id","length","timezone","time","consolidated_weather","the_temp","toFixed","weather_state_abbr","weather_state_name","predictability","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport useDebounce from \"./useDebounce\";\nimport { Paper } from \"@material-ui/core\";\nimport { Button } from \"@material-ui/core\";\n\nimport { connect } from \"react-redux\";\nimport { addItem } from \"../actions/itemActions\";\n\nconst WeatherList = ({ addItem, isAuthenticated, user }) => {\n  const [weatherData, setWeatherData] = useState([]);\n  const [initialQuery, setInitialQuery] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  //debounce the search term\n  const debouncedSearchTerm = useDebounce(searchTerm, 700);\n  const handleChange = e => {\n    setSearchTerm(e.target.value);\n  };\n  useEffect(() => {\n    if (debouncedSearchTerm) {\n      getQuery(debouncedSearchTerm);\n    } else {\n      setInitialQuery([]);\n    }\n  }, [debouncedSearchTerm]);\n\n  // query many cities worldID, only 11 at a time\n  async function getQuery(search) {\n    await fetch(\n      `https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/search/?query=${search}`\n    )\n      .then(res => res.json())\n      .then(res => setInitialQuery(res.slice(0, 10)))\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  // use each worldID to fetch each city weather data\n  useEffect(() => {\n    setWeatherData([]);\n    const showMoreStuff = false;\n    async function getWeather() {\n      Promise.all(\n        initialQuery.map(item => {\n          fetch(\n            `https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${item.woeid}/`\n          )\n            .then(res => res.json())\n            .then(res =>\n              setWeatherData(prevArray => [\n                ...prevArray,\n                { res, showMoreStuff }\n              ])\n            )\n            .catch(err => {\n              console.error(err);\n            });\n          return null;\n        })\n      );\n    }\n    getWeather();\n  }, [initialQuery]);\n\n  useEffect(() => {\n    console.log(searchTerm);\n    console.log(weatherData);\n  }, [weatherData, searchTerm]);\n  // onClick to toggle boolean to show more\n  function handleShow(id) {\n    const newData = weatherData.map(item => {\n      if (item.res.woeid === id) {\n        return {\n          ...item,\n          showMoreStuff: !item.showMoreStuff\n        };\n      } else return item;\n    });\n    setWeatherData(newData);\n  }\n  // funct to return correct day and month from data\n  function getMyDay(day) {\n    const date1 = new Date(day);\n    const dayOfWeekIndex = date1.getDay();\n    const dayNames = [\"Mon\", \"Tue\", \"Wed\", \"Thur\", \"Fri\", \"Sat\", \"Sund\"];\n    return dayNames[dayOfWeekIndex];\n  }\n  function getMyMonth(month) {\n    const month1 = new Date(month);\n    const dayOfMonthIndex = month1.getMonth();\n    const monthNames = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"Aug\",\n      \"Sept\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\"\n    ];\n    return monthNames[dayOfMonthIndex];\n  }\n  // add item to dashboard\n  const onAddItemClick = (item, user) => {\n    const newItem = {\n      name: item.res.title,\n      weathers: item,\n      newID: user._id\n    };\n    addItem(newItem);\n  };\n\n  console.log(user);\n  console.log(weatherData);\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"title\">Weather</h1>\n      {user && <div>userID: {user._id}</div>}\n\n      <div>\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={handleChange}\n          placeholder=\"input city search\"\n          className=\"input-weather\"\n        />\n      </div>\n\n      <h3>Total found: {weatherData.length} </h3>\n      {initialQuery.length > 0 && weatherData.length !== initialQuery.length ? (\n        <img\n          src=\"https://media.giphy.com/media/l31p1SkNXGz3l1nwwu/giphy.gif\"\n          alt=\"loading\"\n          className=\"loading-gif\"\n        />\n      ) : (\n        weatherData.map(item => (\n          <div className=\"each-weather\" key={item.res.woeid}>\n            <div className=\"each-container\">\n              {isAuthenticated === true ? (\n                <Button\n                  className=\"weather-button\"\n                  variant=\"outlined\"\n                  color=\"secondary\"\n                  onClick={() => onAddItemClick(item, user)}\n                >\n                  Add to Saved\n                </Button>\n              ) : (\n                <div>Please login to save cities!</div>\n              )}\n              <br />\n              <h3 className=\"each-weather-title\" variant=\"h3\" component=\"h3\">\n                {item.res.title}\n              </h3>\n              <h6>Timezone: {item.res.timezone}</h6>\n              <h6>Time: {item.res.time.slice(11, 16)}</h6>\n              <h6>\n                Temperature:{\" \"}\n                {item.res.consolidated_weather[0].the_temp &&\n                  item.res.consolidated_weather[0].the_temp.toFixed(1)}{\" \"}\n                degrees celcius\n              </h6>\n\n              <img\n                className=\"weather-image\"\n                src={`https://www.metaweather.com/static/img/weather/${item.res.consolidated_weather[0].weather_state_abbr}.svg`}\n                alt=\"weather state\"\n              />\n              <h6>\n                Weather Conditions:{\" \"}\n                {item.res.consolidated_weather[0].weather_state_name}\n              </h6>\n              <h6>\n                Predictability:{\" \"}\n                {item.res.consolidated_weather[0].predictability &&\n                  item.res.consolidated_weather[0].predictability}\n                %\n              </h6>\n\n              {/* {item.showMoreStuff === false ? (\n                <Button\n                  className=\"weather-button\"\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  onClick={() => handleShow(item.res.woeid)}\n                >\n                  Show more\n                </Button>\n              ) : (\n                <div>\n                  <hr />\n                  <div className=\"show-more-content\">\n                    {item.res.consolidated_weather.map((weather, i) => (\n                      <div className=\"show-more-each\" key={i}>\n                        {i === 0 ? (\n                          <h6>Tomorrow</h6>\n                        ) : (\n                          <h6>\n                            {getMyDay(\n                              item.res.consolidated_weather[i].applicable_date\n                            )}{\" \"}\n                            {parseInt(\n                              item.res.consolidated_weather[\n                                i\n                              ].applicable_date.slice(8, 10)\n                            ) < 10\n                              ? item.res.consolidated_weather[\n                                  i\n                                ].applicable_date.slice(9, 10)\n                              : item.res.consolidated_weather[\n                                  i\n                                ].applicable_date.slice(8, 10)}{\" \"}\n                            {getMyMonth(\n                              item.res.consolidated_weather[i].applicable_date\n                            )}\n                          </h6>\n                        )}\n                        <img\n                          className=\"weather-image\"\n                          src={`https://www.metaweather.com/static/img/weather/${item.res.consolidated_weather[i].weather_state_abbr}.svg`}\n                          alt=\"weather state\"\n                        />\n                        <h6>\n                          {item.res.consolidated_weather[i].weather_state_name}\n                        </h6>\n                        <h6>\n                          {item.res.consolidated_weather[i].the_temp &&\n                            item.res.consolidated_weather[i].the_temp.toFixed(\n                              1\n                            )}\n                          C\n                        </h6>\n                        <h6>\n                          Predictability:{\" \"}\n                          {item.res.consolidated_weather[i].predictability &&\n                            item.res.consolidated_weather[i].predictability}\n                          %\n                        </h6>\n                      </div>\n                    ))}\n                  </div>\n                  <Button\n                    className=\"weather-button\"\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={() => handleShow(item.res.woeid)}\n                  >\n                    Show less\n                  </Button>\n                </div>\n              )} */}\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  );\n};\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n});\nexport default connect(mapStateToProps, { addItem })(WeatherList);\n"]},"metadata":{},"sourceType":"module"}